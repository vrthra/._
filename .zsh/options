#------------------------------------------------------------------------------
# Extended globing: zshexpn
#    list all symlinks in dir => ls *(@)
#    ls **/*.rb             : recursive globbing
#    ls ***/*.rb            : follow symlinks
#    ls [^f]oo              : any _oo except foo
#    ls ^(foo|bar)          : any except foo or bar
#
# -approximate matching:
#    ls (#a1)foobar         : correct upto one mistake. (#a<n>)
#
# -qualifiers (#q_)   at the end of match in (). - can be combined
#                   . regular @ symlinks / dirs = sockets p named_pieps
#                   * excutable
#                   r w x owner:read,write,exec
#    ls ./*(#q@)          : all symlinks
#    ls ./*(#q.)          : all regular files
#    echo ./*(#q/)        : all dirs
#    echo ./*(#q^/)       : all except dirs
#     echo ./*(#qx)(#q^/) : all executable not dir
#------------------------------------------------------------------------------
setopt EXTENDED_GLOB
setopt extendedglob
#------------------------------------------------------------------------------
# echo animal==cat -> animal=/bin/cat
setopt MAGIC_EQUAL_SUBST
setopt magicequalsubst
#------------------------------------------------------------------------------
setopt NO_sh_file_expansion
#setopt correct
#------------------------------------------------------------------------------
# perform cd if specified directly without 'cd' and dir exists
setopt AUTO_CD
#------------------------------------------------------------------------------
# make cd push old dir to dirstack
setopt AUTO_PUSHD
setopt autopushd
#------------------------------------------------------------------------------
setopt pushdignoredups
#------------------------------------------------------------------------------
# get zsh to print exit value on failure of cmd
setopt printexitvalue
#------------------------------------------------------------------------------
# dont move to the end of word on completion
setopt complete_in_word
#------------------------------------------------------------------------------
setopt SH_WORD_SPLIT
#------------------------------------------------------------------------------
# allow for i in *; echo $i
# also select, if , function
setopt SHORT_LOOPS

#------------------------------------------------------------------------------
# rc shell like command execution. e.g PATH=.home/bin, file=.home/bin/sunos/me
# sunos/me is executed
setopt PATH_DIRS
#------------------------------------------------------------------------------
setopt HIST_VERIFY # ask user before execution
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE  # ignore commands with space in front.
setopt HIST_NO_STORE # ignore fc commands in history
#------------------------------------------------------------------------------
# disable ^Q, ^S
unset FLOW_CONTROL
#------------------------------------------------------------------------------
# rather annoying feature.
unsetopt sharehistory
#------------------------------------------------------------------------------
# VI Options.
#------------------------------------------------------------------------------
set -o vi
bindkey -v
bindkey '^Z' accept-and-hold
bindkey "^A" beginning-of-line
bindkey "^E" end-of-line
bindkey '^R' push-line
bindkey '^X' execute-named-cmd
bindkey '^K' vi-kill-line
#^D - show completion

# Incremental search
bindkey -M vicmd "//" history-beginning-search-backward
bindkey -M vicmd "??" history-beginning-search-forward

#------------------------------------------------------------------------------
# On vi mode, use q like ^R
bindkey -M vicmd "q" push-line
bindkey -M vicmd 'u' undo
bindkey -M vicmd 'z' accept-and-hold

bindkey '\e[A' up-line-or-history
bindkey '\e[B' down-line-or-history

bindkey '\eOA' up-line-or-history
bindkey '\eOB' down-line-or-history

bindkey '\e[C' forward-char
bindkey '\e[D' backward-char

bindkey '\eOC' forward-char
bindkey '\eOD' backward-char

# go into vi mode for commands
# avoids the annoing delay on /
bindkey '\e/' vi-history-search-backward
